# Code masterpiece (Backend)

[![Java](https://img.shields.io/badge/Java_21_(LTS)-ED8B00?style=for-the-badge&logo=openjdk&logoColor=white)](https://openjdk.org/)
[![Spring Boot](https://img.shields.io/badge/Spring_Boot_3.5-6DB33F?style=for-the-badge&logo=springboot&logoColor=white)](https://spring.io/projects/spring-boot)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL_16-4169E1?style=for-the-badge&logo=postgresql&logoColor=white)](https://www.postgresql.org/)

> í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜ì™€ ë°ì´í„° ë¬´ê²°ì„±ì„ ìµœìš°ì„ ìœ¼ë¡œ ê³ ë ¤í•œ, ëª¨ë˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìœ„í•œ RESTful API ì„œë²„ì…ë‹ˆë‹¤.

ğŸ”— [Code Masterpiece](https://www.codemasterpiece.com)

ğŸ”— [Frontend Repo](https://github.com/DevNathan/codemasterpiece-front)

---

### ëª©ì°¨

1. ê°œë°œ ì£¼ì•ˆì 
2. ë°±ì—”ë“œ ì—”ì§€ë‹ˆì–´ë§ í‘œì¤€
3. í…Œí¬ ìŠ¤íƒ
4. íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ì‚¬ë¡€

<br>

## 1. ê°œë°œ ì£¼ì•ˆì 
ë‹¨ìˆœí•œ ê¸°ëŠ¥ êµ¬í˜„ì„ ë„˜ì–´, **ì‚¬ìš©ì ë°ì´í„° ë³´í˜¸, ì‹œìŠ¤í…œ ì„±ëŠ¥, ê·¸ë¦¬ê³  ìš´ì˜ ì•ˆì •ì„±**ì˜ 3ë°•ìë¥¼ ê°–ì¶˜ ì—”ì§€ë‹ˆì–´ë§ì„ ëª©í‘œë¡œ í–ˆìŠµë‹ˆë‹¤.

### 1) Privacy-First: ì‚¬ìš©ì ì‹ ë¢°ë¥¼ ìœ„í•œ ë³´ì•ˆ ì•„í‚¤í…ì²˜
ê°œì¸ ë¸”ë¡œê·¸ ì„œë¹„ìŠ¤ê°€ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ë³´ì•ˆ ìš°ë ¤ë¥¼ ë¶ˆì‹ì‹œí‚¤ê¸° ìœ„í•´, **'ë°ì´í„° ìµœì†Œ ìˆ˜ì§‘'**ê³¼ **'ì—”í„°í”„ë¼ì´ì¦ˆê¸‰ ë³´ì•ˆ ì ìš©'**ì„ ì›ì¹™ìœ¼ë¡œ ì‚¼ì•˜ìŠµë‹ˆë‹¤.

- **Zero-Knowledge ì¸ì¦ ì „ëµ (GitHub OAuth2)**
  > ìì²´ íšŒì›ê°€ì… ê¸°ëŠ¥ì„ ê³¼ê°íˆ ë°°ì œí•˜ê³  **GitHub OAuth2** ë‹¨ì¼ ì¸ì¦ì„ ì±„íƒí–ˆìŠµë‹ˆë‹¤. ë¯¼ê°í•œ ê°œì¸ì •ë³´(ë¹„ë°€ë²ˆí˜¸, ì´ë©”ì¼ ë“±)ë¥¼ DBì— ì €ì¥í•˜ì§€ ì•ŠëŠ” **Privacy-First** ì„¤ê³„ë¥¼ í†µí•´, í•´í‚¹ì´ë‚˜ ìœ ì¶œ ì‚¬ê³ ì˜ ìœ„í—˜ì„ ì›ì²œ ì°¨ë‹¨í–ˆìŠµë‹ˆë‹¤.

- **Spring Security Hardening**
  > í”„ë ˆì„ì›Œí¬ì˜ ê¸°ë³¸ ì„¤ì •ì— ì•ˆì£¼í•˜ì§€ ì•Šê³  ë³´ì•ˆì„ ê°•í™”í–ˆìŠµë‹ˆë‹¤. **ì„¸ì…˜ ê³ ì • ë³´í˜¸(Session Fixation Protection)**ë¡œ í•˜ì´ì¬í‚¹ì„ ë°©ì§€í•˜ê³ , **ì—„ê²©í•œ CORS ì •ì±…**ìœ¼ë¡œ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì˜¤ë¦¬ì§„ë§Œ í—ˆìš©í–ˆìŠµë‹ˆë‹¤. ë˜í•œ, ì¸ì¦ í›„ ì‚¬ìš©ìê°€ ë³´ë˜ í˜ì´ì§€ë¡œ ì •í™•íˆ ëŒì•„ì˜¤ë„ë¡ ë¦¬ë‹¤ì´ë ‰íŠ¸ ë¡œì§(`RuriSupport`)ì„ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•˜ì—¬ ë³´ì•ˆê³¼ UXì˜ ê· í˜•ì„ ë§ì·„ìŠµë‹ˆë‹¤.

### 2) í‘œì¤€í™”ëœ ì‘ë‹µ ì•„í‚¤í…ì²˜ì™€ ìƒì‚°ì„± í–¥ìƒ (Response Standardization)
í”„ë¡ íŠ¸ì—”ë“œì™€ì˜ í˜‘ì—… íš¨ìœ¨ì„ ê·¹ëŒ€í™”í•˜ê³  ë°±ì—”ë“œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì—ë§Œ ì§‘ì¤‘í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ ë§Œë“¤ê¸° ìœ„í•´, **API ì‘ë‹µì˜ íš¡ë‹¨ ê´€ì‹¬ì‚¬(Cross-Cutting Concerns)ë¥¼ AOP ìˆ˜ì¤€ì—ì„œ ì²˜ë¦¬**í–ˆìŠµë‹ˆë‹¤.

* **Global Response Wrapping (Auto-Wrapping)**
  > ëª¨ë“  ì»¨íŠ¸ë¡¤ëŸ¬ ì‘ë‹µì„ ê°€ë¡œì±„ì–´(Intercept) í‘œì¤€ í¬ë§·(`SuccessResponse`)ìœ¼ë¡œ ìë™ ë³€í™˜í•˜ëŠ” `ResponseBodyAdvice`ë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
  > ê°œë°œìëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ ë‹¨ì—ì„œ `return "ok"`ë‚˜ `return data`ì™€ ê°™ì´ í•µì‹¬ ë°ì´í„°ë§Œ ë°˜í™˜í•˜ë©´ ë˜ë©°, ìƒíƒœ ì½”ë“œ/ë©”ì‹œì§€/íŠ¸ë ˆì´ìŠ¤ ID ë“±ì´ í¬í•¨ëœ í‘œì¤€ ì‘ë‹µ ê»ë°ê¸°ë¥¼ ì‹ ê²½ ì“¸ í•„ìš”ê°€ ì—†ì–´ **ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œë¥¼ 100% ì œê±°**í–ˆìŠµë‹ˆë‹¤.

* **Centralized Exception Handling**
  > ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì—­ì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ë¥¼ `GlobalExceptionHandler` í•œ ê³³ì—ì„œ í¬ì°©í•˜ì—¬ í‘œì¤€ ì—ëŸ¬ í¬ë§·(`ErrorResponse`)ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
  > íŠ¹íˆ `MethodArgumentNotValidException`ê³¼ ê°™ì€ ê²€ì¦(Validation) ì—ëŸ¬ë¥¼ ìë™ìœ¼ë¡œ íŒŒì‹±í•˜ì—¬ í•„ë“œë³„ ì—ëŸ¬ ë©”ì‹œì§€ë¡œ ê°€ê³µí•¨ìœ¼ë¡œì¨, í”„ë¡ íŠ¸ì—”ë“œê°€ ë³„ë„ì˜ íŒŒì‹± ë¡œì§ ì—†ì´ ì¦‰ì‹œ UIì— ë°˜ì˜í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤.

* **Trace ID Integration**
  > ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í™˜ê²½ì´ë‚˜ ë¶„ì‚° ë¡œê·¸ ì¶”ì ì„ ëŒ€ë¹„í•˜ì—¬, ìš”ì²­ ì‹œì ë¶€í„° ì‘ë‹µê¹Œì§€ ì´ì–´ì§€ëŠ” ê³ ìœ í•œ `Trace ID`ë¥¼ ëª¨ë“  ì„±ê³µ/ì‹¤íŒ¨ ì‘ë‹µì— ìë™ìœ¼ë¡œ ì£¼ì…í•©ë‹ˆë‹¤. ì´ëŠ” ìš´ì˜ ë‹¨ê³„ì—ì„œ ì´ìŠˆ ì¶”ì (Troubleshooting) ì‹œê°„ì„ íšê¸°ì ìœ¼ë¡œ ë‹¨ì¶•ì‹œí‚µë‹ˆë‹¤.
  
### 3) ì—„ê²©í•œ ê³„ì¸µ ë¶„ë¦¬ì™€ Command íŒ¨í„´ (Layered Architecture)
ì†Œí”„íŠ¸ì›¨ì–´ì˜ ë³µì¡ë„ë¥¼ ë‚®ì¶”ê³  ìœ ì§€ë³´ìˆ˜ì„±ì„ ë†’ì´ê¸° ìœ„í•´, ê° ê³„ì¸µì˜ **ì±…ì„ê³¼ ì—­í• **ì„ ëª…í™•íˆ ê·œì •í•˜ê³  ì˜ì¡´ì„± ë°©í–¥ì„ ì² ì €íˆ ê´€ë¦¬í–ˆìŠµë‹ˆë‹¤.

* **Layered Responsibility (ì—­í• ì˜ ê²©ë¦¬)**
  > **Controller**: ì›¹ ìš”ì²­ì˜ ì§„ì…ì ìœ¼ë¡œ, ì—”ë“œí¬ì¸íŠ¸ ì •ì˜, íŒŒë¼ë¯¸í„° ë°”ì¸ë”©, 1ì°¨ì ì¸ ê¶Œí•œ ê²€ì‚¬(Security Context)ì—ë§Œ ì§‘ì¤‘í•©ë‹ˆë‹¤. ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ í¬í•¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<br>
  > **Service**: ìˆœìˆ˜í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ ì§‘í•©ì²´ì…ë‹ˆë‹¤. HTTP ì˜ì¡´ì„±(`HttpServletRequest` ë“±)ì„ ì™„ì „íˆ ë°°ì œí•˜ì—¬ í…ŒìŠ¤íŠ¸ ìš©ì´ì„±ì„ í™•ë³´í–ˆìŠµë‹ˆë‹¤.<br>
  > **Repository/Mapper**: ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼ê³¼ ì˜ì†ì„± ì²˜ë¦¬ì—ë§Œ ì§‘ì¤‘í•©ë‹ˆë‹¤.

* **Command Patternì„ í†µí•œ ë°ì´í„° ì •ê·œí™”**
  > ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ìš”ì²­ DTOê°€ ì„œë¹„ìŠ¤ ê³„ì¸µìœ¼ë¡œ ê·¸ëŒ€ë¡œ ì¹¨íˆ¬í•˜ëŠ” ê²ƒì„ ë§‰ê¸° ìœ„í•´ **Command(Cmd) ê°ì²´**ë¥¼ ë„ì…í–ˆìŠµë‹ˆë‹¤.
  > `Record` íƒ€ì…ì„ í™œìš©í•˜ì—¬ ë¶ˆë³€ì„±(Immutable)ì„ ë³´ì¥í•˜ë©°, **ìƒì„±ì ë‚´ë¶€ì—ì„œ ë°ì´í„° ì •ì œ(Trim, Null ì²˜ë¦¬)**ë¥¼ ê°•ì œí–ˆìŠµë‹ˆë‹¤. ë•ë¶„ì— ì„œë¹„ìŠ¤ ê³„ì¸µì€ í•­ìƒ ì •ì œëœ 'ê¹¨ë—í•œ ë°ì´í„°'ë§Œì„ ì…ë ¥ë°›ì•„ ë¡œì§ ìˆ˜í–‰ì—ë§Œ ì§‘ì¤‘í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ë¥¼ ì™„ì„±í–ˆìŠµë‹ˆë‹¤.

---
<br>

## 2. ë°±ì—”ë“œ ì—”ì§€ë‹ˆì–´ë§ í‘œì¤€
ì•ˆì •ì ì¸ ì„œë¹„ìŠ¤ ìš´ì˜ê³¼ ë°ì´í„° ë¬´ê²°ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´, ê° ê¸°ìˆ ì˜ ì¥ì ì„ ê·¹ëŒ€í™”í•˜ëŠ” í•˜ì´ë¸Œë¦¬ë“œ ì•„í‚¤í…ì²˜ë¥¼ ì ìš©í–ˆìŠµë‹ˆë‹¤.

### 1) Hybrid ORM ì „ëµ: JPAì˜ í•œê³„ë¥¼ ë„˜ëŠ” ì‹¤ìš©ì  ì ‘ê·¼
JPAë¥¼ ë©”ì¸ìœ¼ë¡œ ì‚¬ìš©í•˜ë˜, ë³µì¡í•œ ì—°ì‚°ì´ë‚˜ íŠ¹ì • ë°ì´í„°ë² ì´ìŠ¤ ê¸°ëŠ¥ì´ í•„ìš”í•œ ê²½ìš° MyBatisë¥¼ ë„ì…í•˜ì—¬ **ê¸°ìˆ ì  ìœ ì—°ì„±(Flexibility)**ì„ í™•ë³´í–ˆìŠµë‹ˆë‹¤.

- **Domain-Centric (JPA)**
  > ëŒ€ë¶€ë¶„ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ì¼ë°˜ì ì¸ ì¡°íšŒ(Read) ë° ë³€ê²½(Write) ì‘ì—…ì—ëŠ” **JPA**ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°ì²´ ì§€í–¥ì ì¸ ë„ë©”ì¸ ëª¨ë¸ì„ ìœ ì§€í–ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ìƒì‚°ì„±ì„ ë†’ì´ê³  ìŠ¤í‚¤ë§ˆ ë³€ê²½ì— ìœ ì—°í•˜ê²Œ ëŒ€ì²˜í–ˆìŠµë‹ˆë‹¤.

- **Advanced Querying (MyBatis)**
  > JPA(JPQL)ë§Œìœ¼ë¡œëŠ” í‘œí˜„í•˜ê¸° ì–´ë ¤ìš´ **ê³„ì¸µí˜• ì¿¼ë¦¬(`WITH RECURSIVE`)**ë‚˜ ë°ì´í„°ë² ì´ìŠ¤ ê³ ìœ  í•¨ìˆ˜ í™œìš©, ë³µì¡í•œ í†µê³„ì„± ì¿¼ë¦¬ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ **MyBatis**ë¥¼ ë³‘í–‰ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
  > QueryDSL ì—†ì´ë„ ë³µì¡í•œ ë™ì  ì¿¼ë¦¬ë¥¼ ì§ê´€ì ì¸ XMLë¡œ ê´€ë¦¬í•˜ë©°, ORMì˜ ì¶”ìƒí™” ë¹„ìš©ì„ ì œê±°í•˜ê³  ì¿¼ë¦¬ íŠœë‹ì˜ ì œì–´ê¶Œì„ í™•ë³´í–ˆìŠµë‹ˆë‹¤.
  
### 2) Schema as Code (ë°ì´í„°ë² ì´ìŠ¤ í˜•ìƒ ê´€ë¦¬)
ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë³€ê²½ì„ ìˆ˜ë™ìœ¼ë¡œ ê´€ë¦¬í•  ë•Œ ë°œìƒí•˜ëŠ” íœ´ë¨¼ ì—ëŸ¬ì™€ í™˜ê²½ ê°„ ë¶ˆì¼ì¹˜ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ í˜•ìƒ ê´€ë¦¬ ë„êµ¬ë¥¼ í•„ìˆ˜ì ìœ¼ë¡œ ì ìš©í–ˆìŠµë‹ˆë‹¤.

- **Flyway Migration**
  > ëª¨ë“  DDL(Create, Alter) ë³€ê²½ ì‚¬í•­ì„ ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œ(Git)ìœ¼ë¡œ ì¶”ì í•˜ê³ , ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ë™ ì‹œì ì— ìë™ìœ¼ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë¡œì»¬-ê°œë°œ-ìš´ì˜ í™˜ê²½ì˜ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆë¥¼ **100% ì¼ì¹˜**ì‹œí‚¤ê³  ë°°í¬ ì•ˆì •ì„±ì„ í™•ë³´í–ˆìŠµë‹ˆë‹¤.
  
### 3) ê³ ê°€ìš©ì„± íŒŒì¼ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ (Enterprise-Grade File System)
í™•ì¥ì„±ê³¼ ë°ì´í„° ì •í•©ì„±ì„ ìµœìš°ì„ ìœ¼ë¡œ ê³ ë ¤í•˜ì—¬, ë‹¨ìˆœ íŒŒì¼ ì €ì¥ì„ ë„˜ì–´ì„  **ë…ìì ì¸ íŒŒì¼ ê´€ë¦¬ íŒŒì´í”„ë¼ì¸**ì„ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤.

- **Storage Abstraction (IoManager ë¶„ë¦¬)**
  > íŒŒì¼ì˜ ë©”íƒ€ë°ì´í„° ê´€ë¦¬(DB)ì™€ ë¬¼ë¦¬ì  ì €ì¥ì†Œ ì œì–´(I/O)ì˜ ì±…ì„ì„ ì—„ê²©íˆ ë¶„ë¦¬í–ˆìŠµë‹ˆë‹¤. `IoManager` ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ S3, ë¡œì»¬ ë””ìŠ¤í¬ ë“± ì €ì¥ì†Œ êµ¬í˜„ì²´ê°€ ë³€ê²½ë˜ë”ë¼ë„ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§(`FileService`)ì—ëŠ” ì˜í–¥ì„ ì£¼ì§€ ì•ŠëŠ” **ìœ ì—°í•œ ì•„í‚¤í…ì²˜**ë¥¼ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤.

- **Transaction-Aware Async Processing**
  > ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì§•ê³¼ ê°™ì€ ë¬´ê±°ìš´ ì‘ì—…ì€ ë¹„ë™ê¸°ë¡œ ì²˜ë¦¬í•˜ë˜, ë°ì´í„° ì •í•©ì„±ì„ ìœ„í•´ **íŠ¸ëœì­ì…˜ ì»¤ë°‹(After Commit)** ì´í›„ì—ë§Œ ì´ë²¤íŠ¸ë¥¼ ë°œí–‰í•˜ë„ë¡ ì œì–´í–ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ "DBì—ëŠ” ë°ì´í„°ê°€ ì—†ëŠ”ë° ë³€í™˜ ì‘ì—…ì´ ì‹œì‘ë˜ëŠ”" ë ˆì´ìŠ¤ ì»¨ë””ì…˜ì„ ë°©ì§€í•˜ê³ , ì•„ì›ƒë°•ìŠ¤ íŒ¨í„´ ë„ì… ì „ ë‹¨ê³„ì˜ ì‹¤ìš©ì ì¸ ì •í•©ì„± ëª¨ë¸ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

- **Reference Counting & Integrity (RefService)**
  > DB ë°ì´í„°ì™€ ì‹¤ì œ íŒŒì¼ì˜ ì‹¤ì¡´ ì—¬ë¶€ë¥¼ ë™ê¸°í™”í•˜ê¸° ìœ„í•´ **ì°¸ì¡° ì¹´ìš´íŒ…(Reference Counting)** ì‹œìŠ¤í…œì„ ë„ì…í–ˆìŠµë‹ˆë‹¤. ê²Œì‹œê¸€, ëŒ“ê¸€ ë“± ë„ë©”ì¸ ì—”í‹°í‹°ì™€ íŒŒì¼ ê°„ì˜ ì—°ê²°ì„ `FileRef`ë¡œ ê´€ë¦¬í•˜ì—¬, ê³ ì•„ íŒŒì¼(Orphan File)ì„ ì¶”ì í•˜ê³  ì‚­ì œí•˜ëŠ” GC(Garbage Collection)ì˜ ê¸°ë°˜ì„ ë§ˆë ¨í–ˆìŠµë‹ˆë‹¤.
  
---
<br>

## 3. í…Œí¬ ìŠ¤íƒ

| ë¶„ë¥˜ (Category) | ì‚¬ìš© ê¸°ìˆ  (Technologies) |
| :--- | :--- |
| **Language** | [![Java 21](https://img.shields.io/badge/Java_21_(LTS)-ED8B00?style=for-the-badge&logo=openjdk&logoColor=white)](https://openjdk.org/) |
| **Framework** | [![Spring Boot](https://img.shields.io/badge/Spring_Boot_3.5.6-6DB33F?style=for-the-badge&logo=springboot&logoColor=white)](https://spring.io/projects/spring-boot) [![Spring Security](https://img.shields.io/badge/Spring_Security-6DB33F?style=for-the-badge&logo=springsecurity&logoColor=white)](https://spring.io/projects/spring-security) |
| **Data Access** | [![JPA](https://img.shields.io/badge/Spring_Data_JPA-59666C?style=for-the-badge&logo=hibernate&logoColor=white)](https://hibernate.org/) [![MyBatis](https://img.shields.io/badge/MyBatis_3.0-C60F04?style=for-the-badge&logo=mybatis&logoColor=white)](https://mybatis.org/mybatis-3/) [![Flyway](https://img.shields.io/badge/Flyway-CC0200?style=for-the-badge&logo=flyway&logoColor=white)](https://flywaydb.org/) |
| **Database & Cache** | [![PostgreSQL](https://img.shields.io/badge/PostgreSQL_16-4169E1?style=for-the-badge&logo=postgresql&logoColor=white)](https://www.postgresql.org/) [![Redis](https://img.shields.io/badge/Redis_Jedis-DC382D?style=for-the-badge&logo=redis&logoColor=white)](https://redis.io/) |
| **Infra & Cloud** | [![AWS S3](https://img.shields.io/badge/AWS_S3_SDK_v2-232F3E?style=for-the-badge&logo=amazon-aws&logoColor=white)](https://aws.amazon.com/s3/) [![Docker](https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=docker&logoColor=white)](https://www.docker.com/) |
| **DevOps & Tooling** | [![Lombok](https://img.shields.io/badge/Lombok-BC4521?style=for-the-badge&logo=lombok&logoColor=white)](https://projectlombok.org/) [![Yauaa](https://img.shields.io/badge/Yauaa_UserAgent-005571?style=for-the-badge&logo=apache&logoColor=white)](https://github.com/nielsbasjes/yauaa) |

---
<br>

## 4. íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ì‚¬ë¡€

### 1) JVM í™ ë©”ëª¨ë¦¬ í•œê³„ ê·¹ë³µì„ ìœ„í•œ ë„¤ì´í‹°ë¸Œ ì´ë¯¸ì§€ íŒŒì´í”„ë¼ì¸
* **ë¬¸ì œ ìƒí™© (Heap OOM & Latency)**
  > ì´ˆê¸°ì—ëŠ” Java í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬(`ImageIO`)ë¡œ ê³ í•´ìƒë„ ì´ë¯¸ì§€ì˜ ë¦¬ì‚¬ì´ì§•ê³¼ í¬ë§· ë³€í™˜ì„ ì²˜ë¦¬í–ˆìœ¼ë‚˜, ëŒ€ìš©ëŸ‰ ì´ë¯¸ì§€ ì²˜ë¦¬ ì‹œ **JVM Heap Memory OOM(Out Of Memory)** ë°œìƒ ìœ„í—˜ì´ ë†’ì•˜ê³ , ë³€í™˜ ì†ë„ê°€ ëŠë ¤ ì‚¬ìš©ì ê²½í—˜ì„ ì €í•´í–ˆìŠµë‹ˆë‹¤.

* **í•´ê²° ê³¼ì • (ProcessBuilder & Native Tools)**
  > **External Tooling Strategy**: ë©”ëª¨ë¦¬ íš¨ìœ¨ì´ ë–¨ì–´ì§€ëŠ” Java ë¼ì´ë¸ŒëŸ¬ë¦¬ ëŒ€ì‹ , `cwebp`, `avifenc`ì™€ ê°™ì€ ê³ ì„±ëŠ¥ C/C++ ë„¤ì´í‹°ë¸Œ ë°”ì´ë„ˆë¦¬ë¥¼ `ProcessBuilder`ë¡œ ì§ì ‘ í˜¸ì¶œí•˜ëŠ” íŒŒì´í”„ë¼ì¸ì„ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤.
  > **Streaming I/O**: ì´ë¯¸ì§€ë¥¼ ë©”ëª¨ë¦¬ì— ëª¨ë‘ ë¡œë“œí•˜ì§€ ì•Šê³  **ì„ì‹œ íŒŒì¼(Temp File) ìŠ¤íŠ¸ë¦¬ë°** ë°©ì‹ì„ ì ìš©í•˜ì—¬, ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ì¼ì •í•˜ê²Œ ìœ ì§€(Constant Space Complexity)í–ˆìŠµë‹ˆë‹¤.

* **ê²°ê³¼**
  > ì´ë¯¸ì§€ ë³€í™˜ ì†ë„ë¥¼ ê¸°ì¡´ ëŒ€ë¹„ **ì•½ 4ë°° ì´ìƒ í–¥ìƒ**ì‹œì¼°ìœ¼ë©°, ìµœì‹  ì••ì¶• í¬ë§·ì¸ **AVIF**ë¥¼ ë„ì…í•˜ì—¬ íŠ¸ë˜í”½ ë¹„ìš©ì„ 50% ì ˆê°í–ˆìŠµë‹ˆë‹¤.
  
### 2) JPAì˜ í•œê³„ë¥¼ ë„˜ëŠ” ê³„ì¸µí˜• ëŒ“ê¸€ ì¡°íšŒ ìµœì í™”
* **ë¬¸ì œ ìƒí™© (Recursive Query Limitation)**
  > ë¬´í•œ ëŒ€ëŒ“ê¸€(N-Depth Comment) ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ë©´ì„œ JPAë§Œìœ¼ë¡œëŠ” íš¨ìœ¨ì ì¸ íŠ¸ë¦¬ êµ¬ì¡° ì¡°íšŒê°€ ì–´ë ¤ì› ìŠµë‹ˆë‹¤. ë‹¨ì¼ ì¿¼ë¦¬ë¡œ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ N+1 ë¬¸ì œê°€ ë°œìƒí•˜ê±°ë‚˜, ì• í”Œë¦¬ì¼€ì´ì…˜ ë©”ëª¨ë¦¬ì—ì„œ ì¬ê·€ì ìœ¼ë¡œ ì¡°ë¦½í•´ì•¼ í•˜ëŠ” ë¹„íš¨ìœ¨ì´ ìˆì—ˆìŠµë‹ˆë‹¤.

* **í•´ê²° ê³¼ì • (Native SQL with MyBatis)**
  > ë³µì¡í•œ ì¡°íšŒ ë¡œì§ì— ëŒ€í•´ **MyBatis**ë¥¼ ë„ì…í•˜ê³ , ë°ì´í„°ë² ì´ìŠ¤ì˜ **`WITH RECURSIVE` (Common Table Expression)** êµ¬ë¬¸ì„ í™œìš©í–ˆìŠµë‹ˆë‹¤.
  > DB ì—”ì§„ ë ˆë²¨ì—ì„œ ê³„ì¸µ êµ¬ì¡°ë¥¼ í‰íƒ„í™”(Flatten)í•˜ì—¬ ì¡°íšŒí•¨ìœ¼ë¡œì¨, ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì—°ì‚° ë¶€í•˜ë¥¼ ì œê±°í•˜ê³  ë‹¨ í•œ ë²ˆì˜ ì¿¼ë¦¬ë¡œ ì „ì²´ ëŒ€ëŒ“ê¸€ íŠ¸ë¦¬ë¥¼ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.
  
### 3) ê±°ëŒ€í•´ì§„ íŒŒì¼ ì„œë¹„ìŠ¤(God Class)ì˜ ë¶„ë¦¬ì™€ ê°ì²´ì§€í–¥ì  ë¦¬íŒ©í† ë§
* **ë¬¸ì œ ìƒí™© (Tight Coupling & God Class)**
  > ì´ˆê¸°ì—ëŠ” `FileService` í•˜ë‚˜ì˜ í´ë˜ìŠ¤ê°€ ë¬¼ë¦¬ì  I/O, ë©”íƒ€ë°ì´í„° DB ì €ì¥, ì´ë¯¸ì§€ ì—¬ë¶€ íŒë‹¨(`if (isImage)`), ì¸ë„¤ì¼ ìƒì„± ë¡œì§ì„ ëª¨ë‘ ë‹´ë‹¹í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.
  > ì´ë¡œ ì¸í•´ ì½”ë“œê°€ ë¹„ëŒ€í•´ì§€ê³ (God Class), ë¡œì§ì´ ê°•í•˜ê²Œ ê²°í•©ë˜ì–´ ìˆ˜ì • ì‹œ ì˜í–¥ ë²”ìœ„ë¥¼ íŒŒì•…í•˜ê¸° ì–´ë ¤ìš´ **ìŠ¤íŒŒê²Œí‹° ì½”ë“œ**ê°€ ë˜ì–´ ìœ ì§€ë³´ìˆ˜ì„±ì´ ê¸‰ê²©íˆ ì €í•˜ë˜ì—ˆìŠµë‹ˆë‹¤.

* **í•´ê²° ê³¼ì • (Separation of Concerns & SRP)**
  > **ì—­í• ê³¼ ì±…ì„ì˜ ë¶„ë¦¬(SRP)**: ê¸°ëŠ¥ì„ ëª©ì ì— ë”°ë¼ ì„¸ë¶„í™”í•˜ì—¬ ê° ì»´í¬ë„ŒíŠ¸ì˜ ì±…ì„ì„ ëª…í™•íˆ í–ˆìŠµë‹ˆë‹¤.
  > * **IoManager**: AWS S3 ë“± ë¬¼ë¦¬ì  ìŠ¤í† ë¦¬ì§€ ì œì–´ ë‹´ë‹¹ (ì¸í”„ë¼ ê³„ì¸µ ê²©ë¦¬).
  > * **FileService**: íŒŒì¼ ë©”íƒ€ë°ì´í„°ì˜ ì˜ì†ì„± ê´€ë¦¬ ë‹´ë‹¹ (ê³µí†µ ë„ë©”ì¸).
  > * **ImageService**: ì´ë¯¸ì§€ ì „ìš© ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë°°ë¦¬ì–¸íŠ¸ ì²˜ë¦¬ ë‹´ë‹¹ (íŠ¹í™” ë„ë©”ì¸).
  > * **VariantProcessor**: ë¹„ë™ê¸° ë³€í™˜ ì‘ì—… ì²˜ë¦¬ ë‹´ë‹¹.

* **ê²°ê³¼**
  > **í™•ì¥ì„±(Extensibility) í™•ë³´**: ìƒˆë¡œìš´ ë¯¸ë””ì–´ íƒ€ì…(ì˜ìƒ, ì˜¤ë””ì˜¤) ì¶”ê°€ ì‹œ ê¸°ì¡´ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³  êµ¬í˜„ì²´ë§Œ ì¶”ê°€í•˜ë©´ ë˜ëŠ” **OCP(Open-Closed Principle)** êµ¬ì¡°ë¥¼ í™•ë¦½í–ˆìŠµë‹ˆë‹¤.
  > ë˜í•œ, ë²„ê·¸ ë°œìƒ ì‹œ ë¬¸ì œì˜ ì›ì¸ì´ I/Oì¸ì§€, DBì¸ì§€, í”„ë¡œì„¸ì‹±ì¸ì§€ ì¦‰ì‹œ íŒŒì•…í•  ìˆ˜ ìˆì–´ ë””ë²„ê¹… íš¨ìœ¨ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì´ ì••ë„ì ìœ¼ë¡œ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.
